{"ast":null,"code":"var _jsxFileName = \"/Users/macbookpro/Desktop/A3/assignment-3-HusmanAndrei/frontend-wasteless-joi (1)/src/components/Connecter.js\";\nimport React from 'react';\nimport SockJsClient from 'react-stomp';\nexport default class Connecter extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.sendMessage = msg => {\n      console.log('clicked');\n      this.clientRef.sendMessage('/app/hello', JSON.stringify({\n        name: msg,\n        userId: this.getId()\n      }));\n    };\n  }\n\n  getId() {\n    return localStorage.getItem(\"token\");\n  }\n\n  handleMessage(mes) {\n    this.props.messageReceived();\n\n    if (mes.type === 'individual') {\n      alert(mes.content);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SockJsClient, {\n      url: \"http://localhost:8080/gs-guide-websocket\",\n      topics: ['/topic/greetings/' + this.getId(), '/topic/greetings'],\n      onMessage: this.handleMessage.bind(this),\n      ref: client => {\n        this.clientRef = client;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/macbookpro/Desktop/A3/assignment-3-HusmanAndrei/frontend-wasteless-joi (1)/src/components/Connecter.js"],"names":["React","SockJsClient","Connecter","Component","constructor","props","sendMessage","msg","console","log","clientRef","JSON","stringify","name","userId","getId","localStorage","getItem","handleMessage","mes","messageReceived","type","alert","content","render","bind","client"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,aAAzB;AAEA,eAAe,MAAMC,SAAN,SAAwBF,KAAK,CAACG,SAA9B,CAAwC;AACnDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAInBC,WAJmB,GAIJC,GAAD,IAAS;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACA,WAAKC,SAAL,CAAeJ,WAAf,CAA2B,YAA3B,EAAyCK,IAAI,CAACC,SAAL,CAAe;AAACC,QAAAA,IAAI,EAAEN,GAAP;AAAYO,QAAAA,MAAM,EAAE,KAAKC,KAAL;AAApB,OAAf,CAAzC;AACH,KAPkB;AAElB;;AAMDA,EAAAA,KAAK,GAAE;AACH,WAAOC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAP;AACH;;AAEDC,EAAAA,aAAa,CAACC,GAAD,EAAK;AACd,SAAKd,KAAL,CAAWe,eAAX;;AACA,QAAGD,GAAG,CAACE,IAAJ,KAAa,YAAhB,EAA6B;AACzBC,MAAAA,KAAK,CAACH,GAAG,CAACI,OAAL,CAAL;AACH;AACJ;;AAEDC,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AAAc,MAAA,GAAG,EAAC,0CAAlB;AAA6D,MAAA,MAAM,EAAE,CAAC,sBAAsB,KAAKT,KAAL,EAAvB,EAAqC,kBAArC,CAArE;AACc,MAAA,SAAS,EAAE,KAAKG,aAAL,CAAmBO,IAAnB,CAAwB,IAAxB,CADzB;AAEc,MAAA,GAAG,EAAIC,MAAD,IAAY;AAAE,aAAKhB,SAAL,GAAiBgB,MAAjB;AAAyB,OAF3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ;AAQH;;AA7BkD","sourcesContent":["import React from 'react';\nimport SockJsClient from 'react-stomp';\n\nexport default class Connecter extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    sendMessage = (msg) => {\n        console.log('clicked')\n        this.clientRef.sendMessage('/app/hello', JSON.stringify({name: msg, userId: this.getId()}));\n    }\n    getId(){\n        return localStorage.getItem(\"token\");\n    }\n\n    handleMessage(mes){\n        this.props.messageReceived();\n        if(mes.type === 'individual'){\n            alert(mes.content)\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <SockJsClient url='http://localhost:8080/gs-guide-websocket' topics={['/topic/greetings/' + this.getId(), '/topic/greetings']}\n                              onMessage={this.handleMessage.bind(this)}\n                              ref={ (client) => { this.clientRef = client }} />\n                              \n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}